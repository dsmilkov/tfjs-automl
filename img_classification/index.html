<script src="https://unpkg.com/@tensorflow/tfjs-core@1.2.3/dist/tf-core.js"></script>
<script src="https://unpkg.com/@tensorflow/tfjs-converter@1.2.3/dist/tf-converter.js"></script>
<img id="img" src="daisy1.jpg" />

<script>
async function run() {
  const MODEL_URL = 'model.json';
  const model = await tf.loadGraphModel(MODEL_URL);
  let img = tf.browser.fromPixels(document.getElementById('img'));

  // Preprocessing involves central crop and normalizing between [-1, 1].
//   img = img.resizeBilinear([224, 224]);
//   img = img.div(127.5).sub(1);
//   img = img.expandDims();
  console.log('Image is of shape', img.shape);

  // Add your labels here.
  const dict = model.execute({}, 'Const').dataSync();

//   const inputName = 'map/TensorArrayStack/TensorArrayGatherV3';
  const inputName = 'map/while/eval_image/convert_image/Cast';
  const feedDict = {};
  feedDict[inputName] = img.toFloat();
  feedDict['map/TensorArrayUnstack/Shape'] = tf.tensor1d([1], 'int32');
  let scores = await model.executeAsync(feedDict, 'scores');
  scores.print(true);
  console.log(dict);
//   let data = await res.squeeze().argMax().array();
//   console.log('Top score', dict[data])
//   console.log('All scores', await res.data());
}
run();
</script>